# GitHub Copilot - Regras Obrigat√≥rias para este Projeto

## üö´ REGRA ABSOLUTA: NUNCA USE `cat << EOF` OU `echo >>`

### ‚ùå PROIBIDO (Nunca fazer isto):
```bash
cat > arquivo.txt << 'EOF'
conte√∫do
EOF

echo "conte√∫do" >> arquivo.txt
```

### ‚úÖ OBRIGAT√ìRIO (Use estas ferramentas):
1. **`create_file`** - Para criar novos arquivos
2. **`replace_string_in_file`** - Para editar arquivo existente
3. **`multi_replace_string_in_file`** - Para m√∫ltiplas edi√ß√µes

## Exemplos Corretos

### Criar arquivo novo:
```python
create_file(
    filePath="/path/to/file.txt",
    content="conte√∫do aqui"
)
```

### Editar arquivo existente:
```python
replace_string_in_file(
    filePath="/path/to/file.txt",
    oldString="... 3 linhas antes\nconte√∫do antigo\n... 3 linhas depois",
    newString="... 3 linhas antes\nconte√∫do novo\n... 3 linhas depois"
)
```

### M√∫ltiplas edi√ß√µes:
```python
multi_replace_string_in_file(
    explanation="Descri√ß√£o do que est√° sendo feito",
    replacements=[
        {
            "filePath": "/path/file1.txt",
            "oldString": "...",
            "newString": "..."
        },
        {
            "filePath": "/path/file2.txt",
            "oldString": "...",
            "newString": "..."
        }
    ]
)
```

## Motivos desta Regra

1. **Auditabilidade** - Todas as mudan√ßas aparecem nos diffs do git
2. **Seguran√ßa** - Imposs√≠vel injetar comandos maliciosos
3. **Integridade** - Verifica√ß√£o sint√°tica antes de aplicar
4. **Rastreabilidade** - Controle total sobre o que foi alterado
5. **Permiss√µes** - O Copilot tem permiss√£o total para usar as ferramentas

## Ferramentas Permitidas para Terminal

Usar `run_in_terminal` APENAS para:
- ‚úÖ Executar comandos (git, tests, builds)
- ‚úÖ Verificar status
- ‚úÖ Ler output de comandos
- ‚ùå Nunca para criar/editar arquivos

## Checklist para Implementa√ß√£o

- [ ] Revisar cada tarefa
- [ ] Se cria arquivo novo ‚Üí use `create_file`
- [ ] Se edita arquivo ‚Üí use `replace_string_in_file`
- [ ] Se m√∫ltiplas edi√ß√µes ‚Üí use `multi_replace_string_in_file`
- [ ] Nunca usar `cat`, `echo`, `tee`, `sed` para manipular arquivos
- [ ] Terminal apenas para executar, n√£o para criar

## üö´ REGRA ABSOLUTA: SEMPRE USE SHELL SCRIPT PARA GIT COMMITS

### ‚ùå PROIBIDO (Nunca fazer isto):
```bash
# NUNCA usar git commit direto
git commit -m "mensagem"

# NUNCA usar run_in_terminal para commits
run_in_terminal(command="git commit -m 'mensagem'")
```

### ‚úÖ OBRIGAT√ìRIO (Use este procedimento):
```bash
1. Criar arquivo de mensagem:
   create_file(
       filePath="COMMIT_DESCRI√á√ÉO.txt",
       content="Mensagem estruturada..."
   )

2. Executar shell script:
   ./scripts/commit-k8s-revision.sh COMMIT_DESCRI√á√ÉO.txt
```

### Exemplo Correto:
```python
# 1. Criar arquivo de commit
create_file(
    filePath="/path/COMMIT_PHASE3.txt",
    content="PHASE 3: Complete Kubernetes...\n\nFILES ADDED:..."
)

# 2. Executar script (via run_in_terminal com isBackground=false)
run_in_terminal(
    command="./scripts/commit-k8s-revision.sh COMMIT_PHASE3.txt",
    explanation="Fazer commit usando shell script",
    isBackground=false
)
```

## Por que esta regra?

1. **Auditoria** - Shell script registra data, hora, autor
2. **Consist√™ncia** - Mensagens estruturadas em arquivo (n√£o na CLI)
3. **Rastreabilidade** - Preview das mudan√ßas antes de confirmar
4. **Controle** - Confirma√ß√£o interativa (s/n) no script
5. **Documenta√ß√£o** - Arquivo `.txt` fica no hist√≥rico para refer√™ncia

## Fluxo Correto de Commit

```
1. Stage files ‚Üí git add arquivos.txt
2. Create commit message ‚Üí create_file COMMIT_*.txt
3. Execute script ‚Üí ./scripts/commit-k8s-revision.sh COMMIT_*.txt
4. Confirm interactive prompt ‚Üí "s" (yes)
5. Verify commit ‚Üí git log --oneline -5
```

---

**√öltima atualiza√ß√£o:** 2025-11-19
**Respons√°vel:** User
**Status:** ‚úÖ ATIVO - Aplicar em 100% dos commits
